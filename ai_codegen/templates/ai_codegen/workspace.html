{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RepoMind - Repository</title>

    <!-- jQuery, TailwindCSS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.12/themes/default/style.min.css">

    <!-- JSTree -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.17/jstree.min.js"></script>

    <!-- Prism -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>

    <!-- Notiflix -->
    <script src="https://cdn.jsdelivr.net/npm/notiflix@3.2.8/dist/notiflix-aio-3.2.8.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notiflix@3.2.8/src/notiflix.min.css">
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="flex h-screen">
        <!-- Sidebar (Folder Structure) -->
        <div class="w-1/4 repo-sidebar bg-white p-6 shadow-lg">
            <div class="flex items-center mb-6">
                <!-- Back Button -->
                <a href="javascript:history.back()" class="text-gray-600 hover:text-gray-800 mr-4">
                    <i class="fas fa-arrow-left fa-lg"></i>
                </a>
                <h2 class="text-xl font-bold" id="repo-name">Repository Files</h2>
            </div>
            <!-- Folder Tree -->
            <div id="folder-tree" class="overflow-y-auto h-[calc(100vh-150px)]">
                <!-- Dynamic folder structure will be injected here -->
            </div>
        </div>

        <!-- Main Content (Chat Section) -->
        <div class="flex-1 p-6 flex flex-col bg-white shadow-xl">
            <h2 class="text-2xl font-semibold mb-6 flex justify-between items-center">
                <span id="file-name-heading">File: README.md</span>
                <div id="chat-btns" class="flex hidden">
                    <button id="learn-btn" class="text-md px-4 py-2 bg-blue-600 text-white rounded shadow hover:bg-blue-600 transition">
                        Learn
                    </button>
                    <button id="clear-btn" class="ml-2 px-4 py-2 bg-red-700 text-white rounded shadow hover:bg-red-700 transition">
                        Clear
                    </button>
                </div>
            </h2>

            <!-- Chatbox -->
            <div id="chatbox" class="flex-1 p-4 bg-white shadow rounded-lg overflow-y-auto">
                <p class="text-gray-400 text-center">Start a conversation...</p>
            </div>

            <!-- Input and Submit Button -->
            <div class="mt-4 flex">
                <input id="chat-input" type="text" placeholder="Ask AI something..." 
                    class="flex-1 p-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition">
                <button id="send-btn" class="ml-3 px-5 py-2 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 transition">
                    Send
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript Files -->
    <script src="{% static 'ai_codegen/workspace-common.js' %}"></script>
    <script src="{% static 'ai_codegen/workspace.js' %}"></script>
    <script src="{% static 'ai_codegen/workspace-chat.js' %}"></script>

</body>
</html>
